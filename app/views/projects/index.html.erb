<div class="container">
  <div class="row project-list">
    <div class="col-md-3 check-boxes">
      <%= form_for(:project, :url => {:action => "index"}, :html => {:method => :get}, remote: true, id: 'my_form') do %>
        <% hidden_field_tag :filter, tag.name %>
         <%= hidden_field_tag :charities, @charities %>
         <%= hidden_field_tag :projects, @projects.pluck(:id) %>
        <div>
          <h4> Search by category </h4>
          <% Project::CATEGORIES.each do |category| %>
            <div class= "categories-search">
              <%= check_box_tag "category", category %> <%= category %>
            </div>
          <% end %>
        </div>
        <br>
        <div>
          <h4> Search by status </h4>
          <% Project::STATUSES.each do |status| %>
            <div class= "statuses-search">
              <%= check_box_tag "status", status %> <%= status %>
          </div>
        <% end %>
      </div>
      <br>
      <div>
        <h4> Search by deadline </h4>
        <% Project::DEADLINES.each do |deadline| %>
          <div class= "deadlines-search">
            <%= check_box_tag "deadline", deadline %> within <%= deadline %> days
          </div>
        <% end %>
      </div>
      <br>
      <div>
        <h4> Search by type </h4>
        <% Project::TYPES.each do |work_type| %>
      <div class= "types-search">
        <%= check_box_tag "work_type", work_type %> <%= work_type %>
      </div>
      <% end %>
    </div>
    <br>
    <h4> Search by Country </h4>
    <div class="f16">
      <%= text_field_tag :address, params[:address], placeholder: 'Country', id: "country", class: "form-control" %>
    </div>
    <div class="text-center">
    <%= submit_tag("Search", class:'btn btn-success index-search-button')%>
         <% end %>
    </div>
    </div>
    <div id="filter" class="col-md-9">
      <%= render "project_list", projects: @projects %>
    </div>
  </div>
</div>





<script src="https://cdn.jsdelivr.net/npm/places.js@1.9.0"></script>
<script>
(function() {
  var placesAutocomplete = places({
    container: document.querySelector('#country'),
    type: 'country',
    templates: {
      suggestion: function(suggestion) {
        return '<i class="flag ' + suggestion.countryCode + '"></i> ' +
          suggestion.highlight.name;
      }
    }
  });
})();
</script>
